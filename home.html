
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>try mongo-trapi</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="seven20 - a mongo-trapi interface">
    <meta name="author" content="epic720">

    <script src="http://code.jquery.com/jquery.min.js"></script>
    <script src="./scripts/jquery.seven20.js"></script>
    <script src="./scripts/bootstrap.helper.js"></script>


    <script>

        var client;
        $().ready(function(){
            bootstrapNav('#nav', 'Seven20');
        });

        function doGet()
        {
            if( $('#text').val() !== '')
            {
                var data = { text: $('#text').val(), _id:$('#id').val()};
                getData(doParse() + '?find=' + JSON.stringify(data), insertData);
            }
            else
                getData(doParse(), insertData);
        }

        function doSet()
        {
            var data = { text: $('#text').val(), _id:$('#id').val()};

            setData(doParse(), insertData, data);
        }

        function doParse()
        {
            var request = '/d/' + $('#collection').val();
            var id = $('#id').val();
            if(id !== '')
                request += "/" + id;

            return request;
        }

        function doDelete()
        {
            if( $('#text').val() !== '')
            {
                var data = { text: $('#text').val(), _id:$('#id').val()};
                deleteData(doParse() + '?find=' + JSON.stringify(data), insertData);
            }
            else
                deleteData(doParse(), insertData);
        }

        function displayItem(item)
        {
            $("#viewer").append('<p>');
            $.each(item, function(k, v) {
                if(k === '_id')
                {
                    $("#viewer").append('<h4>_id: ' + v + '</h4>');
                }
                else
                {
                    $("#viewer").append(k + ': ' + v + '</br>');
                }

            });
            $("#viewer").append('</p>');
        }

        function insertData(data)
        {
            $("#viewer").html('');
            if($.isArray(data))
            {
                $.each(data, function(i, item) {
                    displayItem(item);
                });
            }
            else
            {
                displayItem(data);
            }
        }
    </script>

    <link href="./css/bootstrap.css" rel="stylesheet" type="text/css" />
    <style type="text/css">
        body {
            padding-top: 60px;
            padding-bottom: 40px;
        }
        .sidebar-nav {
            padding: 9px 0;
        }
    </style>

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="../assets/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">
</head>

<body>

<div id="nav">
</div>

<div class="container-fluid">
    <div class="row-fluid">
        <div class="span3">
            <div id="viewer" class="well">


            </div>
        </div><!--/span-->
        <div class="span9">
            <div id="callout" class="hero-unit">
                <h1>seven20 - a mongo-trapi interface </h1>
                <p></p>
                <p><a class="btn btn-primary btn-large" href="">Learn more &raquo;</a></p>
                <p>Collection <input id="collection" type="text" class="span3" placeholder="Enter your name..."></p>
                <p>ID <input id="id" type="text" class="span3" placeholder="Enter your name..."></p>
                <p>Text <input id="text" type="text" class="span3" placeholder="Enter some text..."></p>
            </div>
            <div class="row-fluid">
                <div class="span4">
                    <h2>Get Data</h2>
                    <p>populate the boxes and see some data</p>
                    <p><a class="btn" href="javascript:doGet()">Get</a></p>
                </div><!--/span-->
                <div class="span4">
                    <h2>Set Data</h2>
                    <p>populate the boxes and set some data </p>
                    <p><a class="btn" href="javascript:doSet()">Set</a></p>
                </div><!--/span-->
                <div class="span4">
                    <h2>Delete Data</h2>
                    <p>populate the boxes and delete some data</p>
                    <p><a class="btn" href="javascript:doDelete()">Delete</a></p>
                </div><!--/span-->
            </div><!--/row-->
        </div><!--/span-->
    </div><!--/row-->

    <hr>

    <footer>
        <p>&copy; Seven20 2012</p>
    </footer>

</div><!--/.fluid-container-->

</body>
</html>
